<% provide :title, @user.name %>
<div class="container">
  <div class="col-md-12">
    <div class="card hovercard">
      <div class="card-background">
      </div>
      <div class="useravatar">
        <%= image_tag "default-avatar.png" %>
      </div>
      <div class="card-info">
        <span class="card-title"><%= @user.name %></span>
      </div>
    </div>
    <div class="follow-control">
      <%= render "follow_form" unless current_user.nil? %>
    </div>
    <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group">
      <div class="btn-group" role="group">
        <button type="button" id="stars" class="btn btn-primary" href="#tab1" data-toggle="tab">
          <span class="glyphicon glyphicon-transfer" aria-hidden="true"></span>
          <div class="hidden-xs"><%= t "activities" %></div>
        </button>
      </div>
      <div class="btn-group" role="group">
        <button type="button" id="favorites" class="btn btn-default" href="#tab2" data-toggle="tab">
          <span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
          <div class="hidden-xs">
          	<%= pluralize(@user.favorites.size, t("book")) %>
          </div>
        </button>
      </div>
      <div class="btn-group" role="group">
        <button type="button" id="follower" class="btn btn-default" href="#tab3" data-toggle="tab">
          <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
          <div class="hidden-xs">
          	<span class="follower-count"><%= @user.followers.size %> </span>
          	<span><%= t "followers" %></span>
          </div>
        </button>
      </div>
      <% unless current_user != @user %>
        <div class="btn-group" role="group">
          <button type="button" id="following" class="btn btn-default" href="#tab4" data-toggle="tab">
            <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
            <div class="hidden-xs">
              <%= pluralize(@user.following.size, t("following")) %>
            </div>
          </button>
        </div>
      <% end %>
      <div class="btn-group" role="group">
        <button type="button" id="bookmark" class="btn btn-default" href="#tab5" data-toggle="tab">
          <span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>
          <div class="hidden-xs">
            <span><%= @user.bookmarks.size %> </span>
            <span><%= t "bookmark" %></span>
          </div>
        </button>
      </div>
    </div>
    <div>
      <div class="tab-content">
        <div class="tab-pane fade in active" id="tab1">
          <h3><%= t "activities" %></h3>
          <div class="activity-feed">
            <%= render @activities %>
            <% unless @user.activities.size < Settings.limit_activity %>
              <%= link_to activities_path, class: "btn-load-more" do %>
                <span><%= t "load_all" %></span>
              <% end %>
            <% end %>
          </div>
        </div>
        <div class="tab-pane fade in" id="tab2">
          <h3><%= t "favorited_books" %></h3>
          <ul class="fav-list">
            <%= render "favorite", collection: @favorites %>
          </ul>
        </div>
        <div class="tab-pane fade in" id="tab3">
          <h3><%= t "follower" %></h3>
          <ul class="follist">
          	<%= render "followers/follower", collection: @followers %>
          </ul>
        </div>
        <% unless current_user != @user %>
          <div class="tab-pane fade in" id="tab4">
            <h3><%= t "following" %></h3>
            <ul class="follist">
              <%= render "followings/following", collection: @followings %>
            </ul>
          </div>
          <div class="tab-pane fade in" id="tab5">
            <h3><%= t "bookmark" %></h3>
            <ul class="bm-list">
              <%= render "bookmarks/bookmark", collection: @user_bookmarks %>
            </ul>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
